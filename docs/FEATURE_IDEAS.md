# 功能建议与扩展方向

本文档列出可在 XHS Factory 上增加的实用功能，按类别整理，便于排期或选做。  
标注 **优先级** 的为建议优先考虑项。

---

## 一、搜索与筛选

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **按关键词搜索** | 在工作台/回收站内按「标题 / 标签 / 正文」关键词搜索笔记，实时过滤列表 | 高 |
| **按标签筛选** | 多选标签（如「商业思维」「认知觉醒」）只显示带这些标签的笔记 | 高 |
| **排序** | 支持按「解析时间」「标题 A–Z」「标题 Z–A」排序，切换后列表即时更新 | 中 |
| **高级筛选** | 组合条件：时间范围 + 标签 + 是否含图/含链接 等 | 低 |

**实现要点**：笔记已在内存/localStorage，前端过滤即可；若笔记量很大可考虑虚拟列表或分页。

---

## 二、导出与备份

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **导出全部为 JSON** | 一键导出当前工作台+回收站（或仅工作台）为 JSON 文件，含标题、正文、标签、图片 URL、来源链接等，便于备份与迁移 | 高 |
| **从 JSON 导入** | 从之前导出的 JSON 恢复笔记到工作台，换设备或清缓存后可用 | 高 |
| **导出为 Markdown** | 可选「单文件」或「每笔记一个 .md」，便于在 Obsidian/Notion 等中使用 | 中 |
| **定期提醒备份** | 在设置或首次使用时提示「数据仅存本地，建议定期导出备份」 | 低 |

**实现要点**：导出用 `Blob` + `<a download>`；导入时解析 JSON 并合并到现有 notes（可做去重）。

---

## 三、下载与打包

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **批量打包成单个 ZIP** | 批量选中后可选「每个笔记一个 ZIP」（当前行为）或「所有选中笔记打成一个 ZIP」，根目录下按笔记建子文件夹 | 高 |
| **下载失败重试** | 批量下载时某个 ZIP 失败（网络/后端错误）时，在结果中列出失败项，并提供「重试失败」按钮 | 中 |
| **下载队列与暂停** | 批量下载时显示队列进度，支持暂停/继续（需前端维护队列状态） | 低 |
| **自定义 ZIP 内文件名规则** | 如「标题_日期」「序号_标题」等，在设置或下载前选择 | 低 |

**实现要点**：单 ZIP 多笔记需后端新接口（如 `POST /api/download_zip_batch`）或前端循环请求后用 JSZip 在浏览器端打包（大数量时注意内存）。

---

## 四、解析增强

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **解析前链接校验** | 提交前校验每行是否为小红书链接（xiaohongshu.com / xhslink.com），无效行高亮或提示「第 N 行格式有误」 | 中 |
| **解析前去重与提示** | 解析前与现有笔记比对 URL，提示「其中 N 条已存在，将跳过/覆盖？」；可选「仅解析新链接」 | 中 |
| **短链自动展开** | 对 xhslink.com 短链先请求跳转拿到最终 URL 再解析，避免短链失效 | 中 |
| **解析结果缓存（可选）** | 同一 URL 在 N 天内再次解析时直接返回上次结果（需存 raw 数据，占用存储） | 低 |

**实现要点**：校验与去重在前端即可；短链展开可在后端爬虫层或单独接口先 HEAD/GET 取 Location。

---

## 五、收藏与分类

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **收藏/星标** | 单条笔记可标记为「收藏」，顶部 Tab 或侧边增加「收藏夹」视图，只显示收藏 | 高 |
| **自定义标签** | 在现有「笔记自带标签」基础上，支持用户自己打标签（如「待写稿」「已用」），便于分类 | 中 |
| **文件夹/分组** | 支持创建「文件夹」或「分组」，将笔记拖入或批量移入，按组查看 | 低 |

**实现要点**：在 `Note` 类型增加 `starred?: boolean`、`userTags?: string[]` 等；列表增加 Tab 或筛选条件。

---

## 六、体验与界面

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **暗色模式** | 全局或仅爬取工具页支持暗色主题，与系统主题或手动开关联动 | 中 |
| **预览区视图切换** | 网格（当前）/ 列表（单行标题+封面+摘要）切换，可记忆用户选择 | 中 |
| **键盘快捷键** | 如 Esc 关闭预览弹窗、方向键切换图片、Enter 打开预览等，在界面角落提供「快捷键说明」 | 中 |
| **每页条数** | 预览区「每页显示 20/50/100」可调，减少翻页 | 低 |
| **正文 Markdown 渲染** | 预览弹窗内正文按 Markdown 渲染（加粗、列表、链接可点） | 低 |
| **来源链接一键打开** | 预览与列表中「来源链接」可点击在新标签页打开 | 低 |

**实现要点**：暗色用 CSS 变量或 Tailwind dark:；快捷键用 `useEffect` 监听 `keydown` 并判断当前焦点。

---

## 七、统计与概览

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **工作台概览** | 在爬取工具页顶部或侧边展示：笔记总数、回收站数量、最近解析时间、解析成功率（成功/失败占比） | 中 |
| **按标签统计** | 饼图或列表展示「各标签笔记数量」，点击可筛选该标签 | 低 |

**实现要点**：数据均来自现有 notes/trash，前端聚合即可；图表可用轻量库或纯 CSS。

---

## 八、合规与说明

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **使用说明/免责声明** | 在关于页或首次使用时说明：仅供个人学习与备份，请遵守平台规则与版权；不存储账号密码、不代发内容 | 高 |
| **解析频率提示** | 批量解析时若单次数量很大（如 >50），提示「建议分批解析，避免对目标站造成压力」 | 中 |
| **隐私与数据** | 在设置或文档中说明：数据仅存本地/localStorage，不上传账号与密码；若未来有云端同步会单独说明 | 低 |

**实现要点**：以静态页或 Modal + 本地 flag（如 `hasSeenDisclaimer`）即可。

---

## 九、进阶与扩展（可选）

| 功能 | 说明 | 优先级 |
|------|------|--------|
| **多设备同步** | 笔记与收藏同步到自建后端或第三方（如 IndexedDB + 自建 API），多设备共享；需考虑账号与隐私 | 低 |
| **浏览器扩展** | 在小红书网页上点「保存到 XHS Factory」一键把当前笔记 URL 发送到本工具并触发解析 | 低 |
| **RSS/订阅** | 订阅某作者或某话题的最新笔记链接（依赖平台是否提供或爬取策略） | 低 |
| **多语言** | 界面中英切换或简单 i18n，便于分享给非中文用户 | 低 |

---

## 十、实现优先级建议（汇总）

- **优先做**：搜索与筛选、导出/导入 JSON、收藏/星标、使用说明与免责。
- **其次**：批量单 ZIP、解析前去重与校验、短链展开、暗色模式与快捷键。
- **有余力再做**：Markdown 渲染、统计概览、下载重试与队列、自定义标签与分组。

以上均可按需裁剪或合并到迭代里；每做一个功能建议在 `CHANGELOG.md` 中记一笔，并在本表中标注「已实现」方便后续排期。
