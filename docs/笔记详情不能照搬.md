# 笔记详情不能照搬 MediaCrawler

## 我们的原则：不登录

**直接打开 → 读取 → 下载。**

- 用户贴任意链接（xhslink 或 explore 均可）
- 用 Playwright **直接打开**该链接，不预解析、不等标题
- 等页面里 `__INITIAL_STATE__.note.noteDetailMap` 有数据后**读取**
- 解析出标题、正文、图片，再**下载**（ZIP 等）

无需登录、无需 Cookie、无需请求签名，也不调小红书接口。

---

## 和 MediaCrawler 的差异

| 我们 | MediaCrawler |
|------|--------------|
| 无登录 | 需要登录（Cookie / 签名） |
| 直接 goto 用户链接 | 先有 note_id + xsec_token，再调 API 或请求固定 explore URL |
| 打开 → 读 state → 下载 | 接口/HTTP 拿数据 → 存库 → 再下载媒体 |

他们的笔记详情流程（API 优先、固定 URL + httpx）依赖登录态和签名，**不能照搬**。可借鉴的是：抓取间隔、重试、限流错误类型、解析与抓取分离、日志等「不改变打开方式」的部分。

详见 [MediaCrawler 可借鉴点.md](./MediaCrawler%20可借鉴点.md) 第七节。
